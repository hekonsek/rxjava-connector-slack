# RxJava Slack connector

[![Version](https://img.shields.io/badge/RxJava%20Connector%20Slack-0.3-blue.svg)](https://github.com/hekonsek/rxjava-connector-slack/releases)
[![Build](https://api.travis-ci.org/hekonsek/rxjava-connector-slack.svg)](https://travis-ci.org/hekonsek/rxjava-connector-slack)
[![Coverage](https://sonarcloud.io/api/badges/measure?key=com.github.hekonsek%3Arxjava-connector-slack&metric=coverage)](https://sonarcloud.io/component_measures?id=com.github.hekonsek%3Arxjava-connector-slack&metric=coverage)

Connector bridging events generated by Slack bot with [RxJava events](https://github.com/hekonsek/rxjava-event).

## Installation

In order to start using RxJava Slack Connector add the following dependency to your Maven project:

    <dependency>
      <groupId>com.github.hekonsek</groupId>
      <artifactId>rxjava-connector-slack</artifactId>
      <version>0.3</version>
    </dependency>

## Usage

This is how you can create "echo" simple Slack bot responding to all the messages posted to the channel using 
texts of those arriving messages:

```
import static com.github.hekonsek.rxjava.connector.slack.SlackSource.slackSource;
import static com.github.hekonsek.rxjava.event.Headers.requiredReplyCallback;

...

String botToken = ...
String channelId = ...
slackSource(botToken, channelId).build().
  subscribe(event -> requiredReplyCallback(event).reply(event.payload().text()));
```

You can also send response as a Slack table:

```
import static com.github.hekonsek.rxjava.connector.slack.SlackTable;
import static com.github.hekonsek.rxjava.connector.slack.SlackSource.slackSource;
import static com.github.hekonsek.rxjava.event.Headers.requiredReplyCallback;

...

String botToken = ...
String channelId = ...
slackSource(botToken, channelId).build().
  subscribe(event -> {
    SlackTable table = new SlackTable("Here is response:", asList("column1", "column2"), 
      asList(asList("row1column1", "row1column2"), asList("row2column1", ""row2column2")));
    requiredReplyCallback(event).respond(table)
  });
```

If your data is too wide for table, you can display it using a table list instead:

```
import static com.github.hekonsek.rxjava.connector.slack.SlackTableList;
import static com.github.hekonsek.rxjava.connector.slack.SlackSource.slackSource;
import static com.github.hekonsek.rxjava.event.Headers.requiredReplyCallback;

...

String botToken = ...
String channelId = ...
slackSource(botToken, channelId).build().
  subscribe(event -> {
    SlackTableList tableList = new SlackTableList("My data:", ImmutableMap.of(
      "item1", asList("row1", "row2"),
      "item2", asList("row1")
    ));
    requiredReplyCallback(event).respond(tableList)
  });
```

## License

This project is distributed under Apache 2.0 license.